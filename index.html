<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë‚ ì”¨ ì•±</title>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(to bottom, #4facfe, #00f2fe);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.card {
    background: white;
    width: 90%;
    max-width: 350px;
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    text-align: center;
}

select, button {
    padding: 8px;
    margin: 10px 5px;
    border-radius: 10px;
    border: none;
    font-size: 14px;
}

button {
    background: #4facfe;
    color: white;
    cursor: pointer;
}

button:hover {
    background: #007bff;
}

#icon {
    font-size: 80px;
    margin: 10px 0;
}

#temp {
    font-size: 22px;
    font-weight: bold;
}
</style>
</head>

<body>

<div class="card">
    <h2>ğŸŒ¤ ë‚ ì”¨ ì•±</h2>

    <select id="citySelect" onchange="getWeather()">
        <option value="Seoul">Seoul</option>
        <option value="Busan">Busan</option>
        <option value="Incheon">Incheon</option>
        <option value="Daegu">Daegu</option>
        <option value="Tokyo">Tokyo</option>
        <option value="New York">New York</option>
    </select>

    <button onclick="getWeather()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>

    <div id="icon">â³</div>
    <div id="weather">ë‚ ì”¨ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    <div id="temp"></div>
</div>

<script>
const apiKey = "6af5ca2a01b34cd32e0aa4f475f08e6d";

function getWeather() {
    const city = document.getElementById("citySelect").value;
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=kr`;

    fetch(url)
    .then(response => response.json())
    .then(data => {

        console.log(data); // ğŸ”¥ ë””ë²„ê·¸ìš©

        if (data.cod !== 200) {
            document.getElementById("weather").innerText = "ì—ëŸ¬: " + data.message;
            document.getElementById("icon").innerText = "âŒ";
            document.getElementById("temp").innerText = "";
            return;
        }

        const weatherMain = data.weather[0].main;
        const temperature = data.main.temp;

        let icon = "";
        let result = "";

        if (weatherMain === "Rain") {
            icon = "ğŸŒ§";
            result = "ë¹„ê°€ ì˜¤ê³  ìˆìŠµë‹ˆë‹¤";
        } 
        else if (weatherMain === "Snow") {
            icon = "â„";
            result = "ëˆˆì´ ì˜¤ê³  ìˆìŠµë‹ˆë‹¤";
        } 
        else if (weatherMain === "Clear") {
            icon = "â˜€";
            result = "ë§‘ìŠµë‹ˆë‹¤";
        } 
        else {
            icon = "â˜";
            result = "íë¦¬ê±°ë‚˜ ê¸°íƒ€ ë‚ ì”¨ì…ë‹ˆë‹¤";
        }

        document.getElementById("icon").innerText = icon;
        document.getElementById("weather").innerText = result;
        document.getElementById("temp").innerText = temperature + "Â°C";

    })
    .catch(error => {
        document.getElementById("weather").innerText = "ë‚ ì”¨ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
        document.getElementById("icon").innerText = "âŒ";
        document.getElementById("temp").innerText = "";
    });
}

// í˜ì´ì§€ ì—´ë¦¬ìë§ˆì ì‹¤í–‰
window.onload = getWeather;
</script>

</body>
</html>
